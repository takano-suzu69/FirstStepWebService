Amazon Q Developer 他⽣成AIと⽐較してみたと題しまして、
初⼼者⽀部 ⽯原がLTさせていただきます。

↓

自己紹介です。


石原晶子と申します。
Twitterでは高野という名前でインフラエンジニアやっています。

同人誌大好きで技術書を出しています。
今日話すAmazon Q Developer は触ったばかりの初心者です。

↓

2. 本⽇話すテーマ「⽐較してみた」条件

Claude3.7、Amazon Qの⽐較を
CloudFormationを書いてもらい行いました。


条件として、初めに生成AIに投げるプロンプトを同じプロンプトで行いました。
両方無料プランで出せる範囲です。

OpenAI(GPT-4-turbo)だと無料の範囲ではうまくいかなかったのでこちらの2つで比較しています。
↓

まず⽐較① シンプルな１サービスを設定するIaC


ログ保管であるCloudtrailを設定するIaCを出してもらいました。


Cloudtrailとは
AWSのアカウント内で実⾏されるアクションや
イベントをトラッキングして記録し、証跡を管
理するためのサービス
↓

プロンプトはこちらです。
「Write CloudFormation to set up CloudTrail,Trail name is TakanoTrail, and just output
 to S3」

AmazonQDeveloperが英語のみの対応なので、英語で投げています。
意味は、

Cloudtrail をTakanoTrail という名前でセットアップする
CloudFormationを書いて。S3に出⼒する設定も込みで という簡単なものです。


↓
⽐較① 結果
↓
として

両⽅ともTakanoTrail、S3の設定がされました
↓
実Yamlファイルはこんなかんじです。
結構一致しております。
↓
実際の差分として
CloudFormation コメント有無
S3のデフォルト設定(暗号化)明記(Claude)
 S3 バージョニング指定(Claude)

バージョニング指定は個人的感覚だとCloudtrail用バケットでは、SCPで削除縛ったりするなどで不要なイメージですが、つけても悪くはないです。

初回出力でAmazonQ Developerは使えるものは出してこなかったので、1回追加で修正を指示プロンプトを入れましたが、Claudeは初回でよいものを出してきました。

ですので、両方ともよい結果、少しClaudeが上回ったかな、の結果でした。

↓
次に⽐較② として、複数のサービスを使うシステムのIaCを試しました。
 webサービス、ただし内部ネットワークからし
かアクセスしない閉じた環境からアクセス のIaCです。

↓
作りたいイメージとしてこんな感じで、
EC2からS3に配置したhtmlファイルを、VPCエンドポイント経由で見れるWEBサービスです。すべてプライベート、閉塞NWで完結するものです。

↓

プロンプトとしてはこれを使いました。
↓
⽇本語で表すと


以下のシステムを⼀つのYamlファイルにまとめて
・S3
 WebServer として「Hello world Takano」と表⽰されるS3
ただし、同時に作成する同じリージョン（北⽶）のプライベートVPCからのみアクセ
スできるようにバケットポリシーを設定する
・Private VPC
・EC2 （最も安価なAmazon Linux）
・EC2 Instance Connect endpoint
・S3 endpoint (EC2からアクセスできるように)

↓
⽐較② 結果
↓

Amazon Q Developerでは無事に完成し、

↓
Claudeでは

何故か Publicの経路、EC2でもWEBサービスが出来てしまいました。

おそらく、それぞれのサービスを生成し、その後Yamlを一つにまとめるたんだと思いました。
アクセス経路としてprivateの経路もちゃんと作られたので、
指示が無視されてはないですが、WEBサービス自体をprivateにしてほしいという
プロンプトにはない意図は組んでくれなかったです。

↓
違いのまとめです。

やりなおし回数は両方とも同じ数ではありますが、AmazonQDeveloperの方が、
こちらの意図をくんで　くれました。
↓
余談ですが、AmazonQ Developer、公式ハンズオンが出してくるCloudformationに似ている感じの
出力ができて少し楽しいなと思いました。

↓

所感まとめ
シンプルな１機能を作るIaCならなんでもいい
AWSサービスを複数使⽤して作るなら
簡単なプロンプトで⽐較的よい出⼒が出る Amazon Q Developer がいい︕
Amazon Q Developer ⽇本語化 はよ。

↓

みなさん使ってみてください。
ご清聴ありがとうございました。